<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>safu/vector.h &#8212; safu  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for safu/vector.h</h1><div class="highlight"><pre>
<span></span><span class="c1">// SPDX-License-Identifier: MIT</span>
<span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;safu/vector_types.h&gt;</span>

<div class="viewcode-block" id="c.safuVecCreate"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecCreate">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Initialize a new vector with a given count and element size.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to store the vector struct.</span>
<span class="cm"> *      elementCount (uint32_t): Number of elements that the vector should store.</span>
<span class="cm"> *      elementSize (uint32_t): Size of the elements type.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` in error case</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecCreate</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">elements</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">elementSize</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecFree"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecFree">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Free the memory used by a safu Vector and resets all its members to zero.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector to be free&#39;d.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` if vec is `NULL`</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecFree</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecInsert"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecInsert">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Add an element to an existing safu vector.</span>
<span class="cm"> * If the vector is already full, the size of the vector will be increased by one</span>
<span class="cm"> * element. If the specified position is not the last one, the existing entries</span>
<span class="cm"> * will be shifted one to the right, starting from the specified position.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector which should gain a new element.</span>
<span class="cm"> *      idx (uint32_t): Index in the vector to which the element should be added.</span>
<span class="cm"> *      element (const void *): Pointer to the element that should be added to the vector.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` in error case and leaves vec unchanged</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecInsert</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">element</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecRemove"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecRemove">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Remove the element at an specified index from a safu vector.</span>
<span class="cm"> * It moves all consecutive elements after the selected element by one position</span>
<span class="cm"> * and then zeros the last element.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector which should have an element removed.</span>
<span class="cm"> *      idx (uint32_t): Index in the vector where the element should be removed.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` in error case and leaves vec unchanged</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecRemove</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">idx</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecPush"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecPush">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Add a new element to the end of a safu vector.</span>
<span class="cm"> * This is a shortcut for `safuVecInsert(vec, vec-&gt;elementCount, element)`</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector which should gain a new element.</span>
<span class="cm"> *      element (const void *): Pointer to the element that should be added to</span>
<span class="cm"> *              the vector.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` in error case and leaves vec unchanged</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecPush</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">element</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecPop"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecPop">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Remove the last element of a safu vector.</span>
<span class="cm"> * This function does not free the element in question.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector which should have its last</span>
<span class="cm"> *              element removed.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` in error case and leaves vec unchanged</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecPop</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecSet"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecSet">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Overwrite the element at a specified position in the safu vector</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector which should be modified.</span>
<span class="cm"> *      idx (uint32_t): Index in the vector where the element should overwritten.</span>
<span class="cm"> *      element (const void *): Pointer to the element that should be inserted.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `0` if successful</span>
<span class="cm"> *      - `-1` in error case and leaves vec unchanged</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecSet</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">element</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecGet"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecGet">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Retrieve the pointer to an element inside a safu vector</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector from which to retrieve the element.</span>
<span class="cm"> *      idx (uint32_t): Index in the vector where the element to be retrieved is.</span>
<span class="cm"> *              stored</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - pointer to the element in the vector</span>
<span class="cm"> *      - `NULL` in an error case</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">safuVecGet</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">idx</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecGetLast"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecGetLast">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Retrieve the pointer to the last element inside  safu vector.</span>
<span class="cm"> * This mainly a wrapper for `safuVecGet(vec, (vec-&gt;elementCount - 1))`.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (safuVec_t *): Pointer to the vector from which to retrieve the element.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - pointer to the element in the vector</span>
<span class="cm"> *      - `NULL` in an error case</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">safuVecGetLast</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecElements"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecElements">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Get the number of elements the vector currently holds.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (const safuVec_t *): Pointer to the vector of which the size is asked.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `vec-&gt;elementCount`</span>
<span class="cm"> *      - `0` if vector is invalid</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">safuVecElements</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecFind"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecFind">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Find the index of an element with specified properties inside a safu vector</span>
<span class="cm"> * using a match-function.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (const safuVec_t *): Pointer to the vector to be searched.</span>
<span class="cm"> *      startIdx (uint32_t): The position in the vector to start the search at.</span>
<span class="cm"> *      matchFunc (safuVecFunc_t): A helper function to compare an element in the</span>
<span class="cm"> *              vector with the specified element that serves as the search base.</span>
<span class="cm"> *      matchData (const void *): The element that serves as the search base.</span>
<span class="cm"> *      resultIdx (uint32_t *): buffer to return the index of the found element</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `1` if found</span>
<span class="cm"> *      - `0` if not found</span>
<span class="cm"> *      - `-1` in error case.</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecFind</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">startIdx</span><span class="p">,</span><span class="w"> </span><span class="n">safuVecFunc_t</span><span class="w"> </span><span class="n">matchFunc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">matchData</span><span class="p">,</span>
<span class="w">                </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">resultIdx</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecFindGet"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecFindGet">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Find an element inside a safu vector that meets specified requirements and</span>
<span class="cm"> * retrieve the matching element.</span>
<span class="cm"> * This function is a wrapper for the combination of `safuVecFind` and `safuVecGet`.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (const safuVec_t *): Pointer to the vector to be searched.</span>
<span class="cm"> *      element (void **): Buffer to return the found element from the vector.</span>
<span class="cm"> *      idx (uint32_t *): Buffer to store the index of the found element.</span>
<span class="cm"> *              If this value is not NULL, it also serves as the starting index</span>
<span class="cm"> *              for the search.</span>
<span class="cm"> *      matchFunc (safuVecFunc_t): A helper function to compare an element in the</span>
<span class="cm"> *              vector with the specified element that serves as the search base.</span>
<span class="cm"> *      matchData (const void *): The element that serves as the search base.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `1` if found</span>
<span class="cm"> *      - `0` if not found</span>
<span class="cm"> *      - `-1` in error case</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecFindGet</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="o">*</span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">safuVecFunc_t</span><span class="w"> </span><span class="n">matchFunc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">matchData</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecFindRemove"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecFindRemove">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Find an element inside a safu vector that meets specified requirements and</span>
<span class="cm"> * delete it.</span>
<span class="cm"> * This function is a wrapper for the combination of `safuVecFind` and `safuVecRemove`.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (const safuVec_t *): Pointer to the vector to be searched.</span>
<span class="cm"> *      matchFunc (safuVecFunc_t): A helper function to compare an element in the</span>
<span class="cm"> *              vector with the specified element that serves as the search base.</span>
<span class="cm"> *      matchData (const void *): The element that serves as the search base.</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `1` if found</span>
<span class="cm"> *      - `0` if not found</span>
<span class="cm"> *      - `-1` in error case.</span>
<span class="cm"> ******************************************************************/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">safuVecFindRemove</span><span class="p">(</span><span class="n">safuVec_t</span><span class="w"> </span><span class="o">*</span><span class="n">vec</span><span class="p">,</span><span class="w"> </span><span class="n">safuVecFunc_t</span><span class="w"> </span><span class="n">matchFunc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">matchData</span><span class="p">);</span></div>

<div class="viewcode-block" id="c.safuVecIterate"><a class="viewcode-back" href="../../generated/api/safu/vector_h.html#c.safuVecIterate">[docs]</a><span class="cm">/*******************************************************************</span>
<span class="cm"> * Call a safuVecFunc on every element of the vector.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *      vec (const safuVec_t *): Pointer to the vector to be iterated.</span>
<span class="cm"> *      func (safuVecFunc_t): Function to be executed for every member of</span>
<span class="cm"> *              the vector</span>
<span class="cm"> *      data (const void *): Additional data to be provided to the iterated function</span>
<span class="cm"> * Returns:</span>
<span class="cm"> *      - `1` if found</span>
<span class="cm"> *      - `0` if not found, which leaves the vec unchanged</span>
<span class="cm"> *      - `-1` in error case and leaves the vec unchanged</span>
<span class="cm"> ******************************************************************/</span>
<span class="cp">#define safuVecIterate(__v, __f, __d) safuVecFind(__v, 0, __f, __d, NULL)</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">safu</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../generated/api/index.html">safu API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/developer/index.html">Developer documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, wolfgang.gehrhardt@emlix.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>